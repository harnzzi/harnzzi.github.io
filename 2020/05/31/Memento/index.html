<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>Memento | hamlog</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="Design Patterns,Memento" />
    
    <meta name="description" content="Memento Pattern의 취지와 목적은? Memento는 구현 세부 사항을 밝히지 않고 객체의 이전 상태를 저장하고 복원 할 수있는 행동 설계 패턴이다. 즉, private한 field들의 상태를 바꾸지 않고(public이나, protected 등..), 객체들에게 접근 용이하도록 만들기 위한 패턴이다. 다음의 예제를 보며 이해하도록 한다. Probl">
<meta property="og:type" content="article">
<meta property="og:title" content="Memento">
<meta property="og:url" content="https://harnzzi.github.io/2020/05/31/Memento/index.html">
<meta property="og:site_name" content="hamlog">
<meta property="og:description" content="Memento Pattern의 취지와 목적은? Memento는 구현 세부 사항을 밝히지 않고 객체의 이전 상태를 저장하고 복원 할 수있는 행동 설계 패턴이다. 즉, private한 field들의 상태를 바꾸지 않고(public이나, protected 등..), 객체들에게 접근 용이하도록 만들기 위한 패턴이다. 다음의 예제를 보며 이해하도록 한다. Probl">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-05-31T11:47:55.000Z">
<meta property="article:modified_time" content="2020-05-31T11:58:52.729Z">
<meta property="article:author" content="hamzzi">
<meta property="article:tag" content="Design Patterns">
<meta property="article:tag" content="Memento">
<meta name="twitter:card" content="summary">
    

    
        <link rel="alternate" href="/" title="hamlog" type="application/atom+xml" />
    

    
        <link rel="icon" href="/css/images/favicon.png" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-159826565-1', 'auto');
ga('send', 'pageview');

</script>

    
    
    


<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">hamlog</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm/">Algorithm</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm/BOJ/">BOJ</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/C/">C++</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Design-Patterns/">Design Patterns</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Design-Patterns/Behavioral-Patterns/">Behavioral Patterns</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Operating-System/">Operating System</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Operating-System/RTOS/">RTOS</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Web/">Web</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Web/FrameWork/">FrameWork</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Design-Patterns/">Design Patterns</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/Design-Patterns/Behavioral-Patterns/">Behavioral Patterns</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-Memento" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Memento
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
      <i class="fa fa-calendar"></i>
      <a href="/2020/05/31/Memento/" class="article-date">
         <time datetime="2020-05-31T11:47:55.000Z" itemprop="datePublished">2020-05-31</time>
      </a>
    </div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Design-Patterns/" rel="tag">Design Patterns</a>, <a class="tag-link" href="/tags/Memento/" rel="tag">Memento</a>
    </div>

                

                

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <h1 id="Memento-Pattern의-취지와-목적은"><a href="#Memento-Pattern의-취지와-목적은" class="headerlink" title="Memento Pattern의 취지와 목적은?"></a>Memento Pattern의 취지와 목적은?</h1><hr>
<p>Memento는 구현 세부 사항을 밝히지 않고 객체의 이전 상태를 저장하고 복원 할 수있는 행동 설계 패턴이다.</p>
<p>즉, private한 field들의 상태를 바꾸지 않고(public이나, protected 등..), 객체들에게 접근 용이하도록 만들기 위한 패턴이다.</p>
<p>다음의 예제를 보며 이해하도록 한다.</p>
<h1 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h1><hr>
<p> text editor 앱을 만들고 있다고 가정하자. 간단한 텍스트 편집 말고도, 텍스트의 format, image 삽입 등을 지원하도록 만들 것이다.</p>
<p> 이후에, 유저가 자신이 text 편집기에서 수행한 작업을 다시 되돌릴 수 있도록 만들기로 결정했다. 이것의 구현을 위해서, 어떤 작업을 수행하기 전에 앱은 모든 object들의 상태를 저장하고, 그것을 storage에 저장하기로 했다. 이후에, 유저가 어떤 작업을 되돌리기로 결정했다면 앱은 최신 스냅샷을 가져온 후 이것을 이용해서 모든 object의 상태를 복원하도록 했다.</p>
<p> 작업을 실행하기 전에 앱은 객체 상태의 스냅 샷을 저장하고 나중에 이 객체를 이전 상태로 복원하는 데 사용할 수 있다.</p>
<p> 이러한 state snapshots는 어떻게 구현해야 할까? 아마도 모든 객체의 field를 살펴본 후, 그 값들을 storage에 저장해야 할 것이다. 그러나 이것은 object에 access 제한이 강력하지 않을 경우에만 작동할 것이다. </p>
<p> 하지만 실제 구현에서는 object들은 다른 유저들이 쉽게 내부를 들여다 볼 수 없도록 하여 field의 중요한 data들을 모두 숨겨 버리기 때문에, 위처럼 구현하는 것은 좋지 않다.</p>
<p> 하지만 지금은 그 문제를 무시하고, 모든 object의 field state가 public이며, open된 relations라고 생각해보자. 이러한 접근 방식은 즉시 현 문제를 해결 가능하며 object들의 snapshots를 생성할 수 있지만, 여전히 심각한 이슈가 존재한다. </p>
<p> 나중에, 이 text editor class를 refactoring하거나, 일부 field를 추가하거나 제거하기로 한다면, 이 때 영향을 받는 object들의 state들을 복사하여 저장하는 클래스들을 변경해야 될 것이다.</p>
<p> 여기서, 실제 어떤 text editor에서의 snapshots state를 고려해 본다면, 최소한 실제 텍스트, 커서 좌표, 현재 스크롤의 위치 등이 포함되어 있어야 할 것이다. 하나의 snapshot을 만들기 위해서는 이러한 값들을 모아서 어떠한 컨테이너에 넣어야 한다.</p>
<p> 대부분의 경우, 이 object의 컨테이너를 이용해서 많은 text 저장 결과들을 기록해야 한다. 따라서 컨테이너는 한 클래스의 objects가 될 것이다. 이 클래스에는 method는 거의 없고, editor의 상태를 반영하는 많은 field가 존재하게 된다. 그리고 다른 objects가 snapshot에서 데이터를 읽고 쓰도록 하려면 아마 이 class의 field들을 모두 public state로 만들어야 한다. </p>
<p> 결국 snapshot을 저장하기 위해서는 field들이 public이 되어야 한다. 다른 클래스는 snapshot 클래스의 아주 작은 변경에 dependency가 생기며, 그렇지 않으면 private field를 만드는 대신 외부 클래스에 영향을 미치지 않을 수 있지만, access가 제한되어 구현이 어렵게 된다. </p>
<p> 실행 취소(undo)에 대한 다른 구현 방법이 존재할까?</p>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><hr>
<p> 모든 문제는 결국 encapsulation이 깨져서 발생하게 되는 것이다. 일부 object들을 이용해서 어떤 작업을 수행할 때, 필요한 데이터를 수집하기 위해서 어떤 다른 object들의 private space를 침범해야하는 경우가 생길 수 있다.</p>
<p> Memento Pattern은 snapshot 작성을 현재 상태의 실제 owner인 originator object에 맡긴다. 따라서 “외부”에서 editor의 상태를 복사하려는 다른 object 대신, editor class 자체가 자기 자신의 상태에 대해 모든 access 권한이 있으므로 snapshot을 만들 수 있게 된다.</p>
<p> 즉, 이 패턴은 object state의 사본(copy)을 memento라고 불리는 어떤 특수한 object에 저장하도록 제안하는 것이다.  memento의 content는 자기를 생성한 object를 제외한 다른 object에는 access할 수 없다. 다른 object들은 snapshot의 metadata(생성 시간, 수행한 작업의 이름 등..)를 가져올 수 있지만, snapshot에 포함되어 있는 원래 object들의 상태는 가져 올 수 없는 제한된 interface를 사용하여 커뮤니케이션 해야한다.</p>
<p>originator는 memento에 대한 전체 access 권한을 가지지만, caretaker는 오직 metadata에만 access 가능하다.</p>
<p> 이런 제한적인 정책을 이용하면 일반적으로 caretakers라고 불리는 objects에 memento를 저장할 수 있게 된다. caretaker는 제한된 interface를 통해서만 memento를 이용할 수 있으므로, memento 내부에 저장된 state를 조작할 수 없게 된다. 동시에 originator는 field에 모든 access를 지니고 있으므로 원하는대로 이전 상태로 field 값을 복원시킬 수 있다.</p>
<p> text editor 예제에서, caretaker 역할을 하는 별도의 history class를 생성할 수 있다. Editor가 작업을 수행하려고 할 때 마다 caretaker 내부에 저장되어 있는 memento들의 stack이 늘어나게 된다. 앱의 UI에서 이 stack을 랜더링해서 이전에 수행했던 작업 기록을 유저에게 보여줄 수도 있게 된다. </p>
<p> 사용자가 undo를 trigger하면, history는 stack에서 가장 최근의 memento를 가져 와서 편집기로 다시 전달한 후 roll-back을 요청한다. Editor는 memento에 대한 전체 access 권한을 가지므로 memento에서 가져온 값으로 자체 상태를 변경한다.</p>
<h1 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h1><hr>
<h2 id="Implementation-based-on-nested-classes"><a href="#Implementation-based-on-nested-classes" class="headerlink" title="Implementation based on nested classes"></a>Implementation based on nested classes</h2><p>일반적인 구현은 중첩 클래스를 지원하는 것으로 한다. 즉, 다음 구현은 중첩된 클래스가 지원 가능한 언어에서만 가능하다 (C++, C#, Java, …).</p>
<p>Originator 클래스는 자체 상태의 snapshot을 생성하고 필요할 때 snapshot에서 상태를 복원 할 수 있다.<br>Memento는 originator의 state를 저장하는, 즉 snapshot 역할을하는 value object이다. Memento를 immutable하도록 만들고 생성자를 통해 데이터를 한 번만 전달하는 것이 일반적이다.<br>Caretaker는 originator의 상태를 “언제”, 또 “왜” 캡쳐해야 하는지 알고있을 뿐 아니라 언제 state를 복원해야 하는 지도 알고 있어야 한다.<br>Caretaker는 여러개의 memento의 stack을 저장함으로써 originator의 history를 추적할 수 있다. originator가 어떤 지점의 과거로 돌아갸아 할 경우, caretaker는 stack에서 최상위 memento를 가져와서 이를 originator의 restoration method에 전달한다.<br>이 implementation에서, memento class는 originator에 중첩되어야 한다(nested). 이렇게 함으로써 memento의 field와 method가 private로 선언되어 있더라도 originator가 접근 가능하다. 반면에, caretaker는 memento의 field 및 method들에 제한적인 access를 갖고 있어 stack에 memento들을 저장하지만 상태를 변경할 수는 없게 된다.</p>
<h2 id="Implementation-based-on-an-intermediate-interface"><a href="#Implementation-based-on-an-intermediate-interface" class="headerlink" title="Implementation based on an intermediate interface"></a>Implementation based on an intermediate interface</h2><p> 중첩 클래스를 지원하지 않는 프로그래밍 언어에 대한 적절한 대안법에 대해서 설명한다(PHP). </p>
<p>중첩 클래스가 없는 언어의 경우, 어떤 규칙을 설정함으로써 memento의 field의 access를 제한할 수 있다. 그 규칙이란 Caretaker가 오직 명시적으로 선언된(explicitly declared) intermediary interface를 통해서만 memento와 작업할 수 있으며, 이 interface는 오직 memento의 metadata와 관련된 method만 선언한다.<br>반면에, originator는 memento class에 선언된 field와 method에게 access가 가능하여 memento object로 직접 작업할 수 있게 된다. 이 방법의 단점은 memento의 모든 멤버들을 public으로 선언해야 한다는 것이다.</p>
<h2 id="Implementation-with-even-stricter-encapsulation"><a href="#Implementation-with-even-stricter-encapsulation" class="headerlink" title="Implementation with even stricter encapsulation"></a>Implementation with even stricter encapsulation</h2><p> 다른 클래스가 memento를 통해서 originator의 상태에 access할 최소한의 가능성도 남기지 않기 위한 또 다른 구현법이 존재한다.</p>
<p>이 구현은 multiple type의 originator와 memento들을 가질 수 있다. 각 originator는 그에 대응하는 memento class와 동작한다. originator나 memento들은 그 누구에게도 자신의 state를 공개하지 않는다.<br>Caretaker는 이제 memento들에 저장된 상태를 변경하지 못하도록 명시적으로 제한(explicitly restricted)된다. 또한 복원(restore)방법이 memento class에 정의되어 있기 때문에 caretaker class는 originator와 독립적(independent)인 관계를 갖게 된다.<br>각 memento는 자신을 생성한 originator와 연결된다. originator는 자신의 state 값과, 자신 모두를 memento의 생성자에 전달한다. 이 class사이의 밀접한 관계 덕분에, memento는 originator에서 적절한 setter method가 정의되어 있다면 originator의 state를 복원할 수 있게 된다.</p>
<h1 id="Pseudocode"><a href="#Pseudocode" class="headerlink" title="Pseudocode"></a>Pseudocode</h1><hr>
<p> 이 예제에서는, 복잡한 text editor 상태의 snapshot을 저장하고, 필요할 때 이 snapshot들에게서 이전 상태를 복원하기 위한 Command 패턴으로 memento 패턴을 사용한다.</p>
<p> command object들은 caretaker 역할을 한다. command와 연관된 작업을 실행하기 전에, editor의 memento를 가져온다(fetch). 유저가 가장 최신의 command를 취소(undo)하고자 할 때 editor는 command에 저장된 memento를 사용해서 이전 상태로 되돌릴 수 있게 된다.</p>
<p> memento class는 public field들, 또는 getter나 setter를 선언하지 않는다. 따라서 그 어떤 object라도 그 내용을 변경할 수 없게 된다. memento들은 그들을 생성한 editor object와 연결되어 있다. 이를 통해서, memento는 editor object의 setter를 통해서 데이터를 전달해서 링크된 editor의 상태를 복원할 수 있게 된다. memento는 특정 editor object에 연결되어 있으므로, 앱이 중앙 undo stack으로 독립적인 editor windows를 지원하도록 만들 수 있다.</p>
<h1 id="Applicability"><a href="#Applicability" class="headerlink" title="Applicability"></a>Applicability</h1><hr>
<ul>
<li>이전 상태의 object를 복원할 수 있도록 object의 상태에 대한 snapshot을 생성하려는 경우 이 패턴을 사용하면 좋을 것이다.</li>
<li>memento 패턴을 사용하면, private field를 포함하여 object 상태의 전체 copy본을 만들고 object와 별개로 저장할 수 있게 된다. “undo” 사용 경우 말고도 트랜잭션(거래 처리 등)을 처리할 때도 필수적이다(즉, 오류가 나타날 시 작업을 roll back 해야하는 경우).</li>
<li>object의 field/getter/setter에 대한 직접 access를 하는 경우가 encapsulation을 위반하는 경우 이 패턴을 사용하면 좋다.</li>
<li>Memento는 object 자체의 상태 snapshot 생성을 책임진다. 다른 object는 snapshot을 읽을 수 없으므로 original object의 상태 데이터를 안전하게 보호할 수 있게 된다.</li>
</ul>
<h1 id="How-to-Implement"><a href="#How-to-Implement" class="headerlink" title="How to Implement"></a>How to Implement</h1><hr>
<p>Determine what class will play the role of the originator. It’s important to know whether the program uses one central object of this type or multiple smaller ones.</p>
<p>Create the memento class. One by one, declare a set of fields that mirror the fields declared inside the originator class.</p>
<p>Make the memento class immutable. A memento should accept the data just once, via the constructor. The class should have no setters.</p>
<p>If your programming language supports nested classes, nest the memento inside the originator. If not, extract a blank interface from the memento class and make all other objects use it to refer to the memento. You may add some metadata operations to the interface, but nothing that exposes the originator’s state.</p>
<p>Add a method for producing mementos to the originator class. The originator should pass its state to the memento via one or multiple arguments of the memento’s constructor.</p>
<p>The return type of the method should be of the interface you extracted in the previous step (assuming that you extracted it at all). Under the hood, the memento-producing method should work directly with the memento class.</p>
<p>Add a method for restoring the originator’s state to its class. It should accept a memento object as an argument. If you extracted an interface in the previous step, make it the type of the parameter. In this case, you need to typecast the incoming object to the memento class, since the originator needs full access to that object.</p>
<p>The caretaker, whether it represents a command object, a history, or something entirely different, should know when to request new mementos from the originator, how to store them and when to restore the originator with a particular memento.</p>
<p>The link between caretakers and originators may be moved into the memento class. In this case, each memento must be connected to the originator that had created it. The restoration method would also move to the memento class. However, this would all make sense only if the memento class is nested into originator or the originator class provides sufficient setters for overriding its state.</p>
<h1 id="Pros-and-Cons"><a href="#Pros-and-Cons" class="headerlink" title="Pros and Cons"></a>Pros and Cons</h1><hr>
<table>
<thead>
<tr>
<th align="center">Pros</th>
<th align="center">Cons</th>
</tr>
</thead>
<tbody><tr>
<td align="center">캡슐화를 위반하지 않고 객체 상태의 스냅 샷을 생성 할 수 있다.</td>
<td align="center">클라이언트가 memento를 너무 자주 생성하게 된다면 앱에서 많은 RAM을 소비할 수 있게 된다.</td>
</tr>
<tr>
<td align="center">Caretaker가 originator의 상태의 history를 유지하도록 하여 originator의 코드를 단순화 할 수 있다.</td>
<td align="center">Caretaker는 사용하지 않는 memento를 destroy할 수 있도록 originator의 lifecycle을 추적해야 한다.</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">PHP, Python 및 JS와 같은 대부분의 동적 프로그래밍 언어는 memento내의 상태가 그대로 유지되도록 보장할 수 없다.</td>
</tr>
</tbody></table>
<h1 id="Relations-with-Other-Patterns"><a href="#Relations-with-Other-Patterns" class="headerlink" title="Relations with Other Patterns"></a>Relations with Other Patterns</h1><hr>
<p>Undo 구현 시 Command와 Memento를 함께 사용할 수 있다. 이 경우 Command는 target object에 대해 다양한 작업을 수행하는 반면에, Memento는 command가 실행되기 전에 해당 object의 상태를 저장한다.<br>Iterator와 함께 Memento를 사용하여 현재 iteration state를 캡처한 후 필요한 경우 roll back할 수 있다.<br>때때로 프로토타입은 memento의 간단한 대안점이 될 수 있다. 이는 history에서 저장하고자 하는 상태인 object가 상당히 간단하고, 외부 자원(external resources)과 연결된 것이 없거나 또는 link를 재설정(re-establish)하기 쉬운 경우에 작동한다.</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="https://harnzzi.github.io/2020/05/31/Memento/" data-id="ckav07sum0000rgud2l4khuv1" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "hamzzi"
        },
        "headline": "Memento",
        "image": "https://harnzzi.github.io",
        "keywords": "Design Patterns Memento",
        "genre": "Design Patterns Behavioral Patterns",
        "datePublished": "2020-05-31",
        "dateCreated": "2020-05-31",
        "dateModified": "2020-05-31",
        "url": "https://harnzzi.github.io/2020/05/31/Memento/",
        "description": "Memento Pattern의 취지와 목적은?
Memento는 구현 세부 사항을 밝히지 않고 객체의 이전 상태를 저장하고 복원 할 수있는 행동 설계 패턴이다.
즉, private한 field들의 상태를 바꾸지 않고(public이나, protected 등..), 객체들에게 접근 용이하도록 만들기 위한 패턴이다.
다음의 예제를 보며 이해하도록 한다.
Probl",
        "wordCount": 1649
    }
</script>

</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
    </div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/hamjins" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2020/04/19/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B5%AC%EC%A1%B0-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">메모리 구조 이해하기</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/BOJ/">BOJ</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design-Patterns/">Design Patterns</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Design-Patterns/Behavioral-Patterns/">Behavioral Patterns</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Operating-System/">Operating System</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Operating-System/RTOS/">RTOS</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web/FrameWork/">FrameWork</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Design-Patterns/">Design Patterns</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Design-Patterns/Behavioral-Patterns/">Behavioral Patterns</a></p>
                            <p class="item-title"><a href="/2020/05/31/Memento/" class="title">Memento</a></p>
                            <p class="item-date"><time datetime="2020-05-31T11:47:55.000Z" itemprop="datePublished">2020-05-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2020/04/19/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B5%AC%EC%A1%B0-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/" class="title">메모리 구조 이해하기</a></p>
                            <p class="item-date"><time datetime="2020-04-19T14:33:31.000Z" itemprop="datePublished">2020-04-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Algorithm/">Algorithm</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Algorithm/BOJ/">BOJ</a></p>
                            <p class="item-title"><a href="/2020/04/19/BOJ-9207-%ED%8E%98%EA%B7%B8%EC%86%94%ED%85%8C%EB%A6%AC%EC%96%B4/" class="title">BOJ::9207{페그솔테리어};</a></p>
                            <p class="item-date"><time datetime="2020-04-19T12:03:09.000Z" itemprop="datePublished">2020-04-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/C/">C++</a></p>
                            <p class="item-title"><a href="/2020/04/19/std-vector%EC%97%90%EC%84%9C-size-capacity%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C/" class="title">std::vector에서 size, capacity의 차이점은 무엇일까?</a></p>
                            <p class="item-date"><time datetime="2020-04-19T10:36:55.000Z" itemprop="datePublished">2020-04-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Web/">Web</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Web/FrameWork/">FrameWork</a></p>
                            <p class="item-title"><a href="/2020/04/19/hello-world/" class="title">Hello World using Hexo!</a></p>
                            <p class="item-date"><time datetime="2020-04-19T08:37:19.795Z" itemprop="datePublished">2020-04-19</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/c-11/" style="font-size: 10px;">--c++11</a> <a href="/tags/Algorithm/" style="font-size: 20px;">Algorithm</a> <a href="/tags/BOJ/" style="font-size: 20px;">BOJ</a> <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/C-11/" style="font-size: 10px;">C++11</a> <a href="/tags/Design-Patterns/" style="font-size: 10px;">Design Patterns</a> <a href="/tags/GPOS/" style="font-size: 10px;">GPOS</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Kernel/" style="font-size: 10px;">Kernel</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Memento/" style="font-size: 10px;">Memento</a> <a href="/tags/OS/" style="font-size: 20px;">OS</a> <a href="/tags/RTOS/" style="font-size: 10px;">RTOS</a> <a href="/tags/Scheduling/" style="font-size: 10px;">Scheduling</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/standard/" style="font-size: 10px;">standard</a>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2020 hamzzi</p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hamjin';
    
    
    var disqus_url = 'https://harnzzi.github.io/2020/05/31/Memento/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    

    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>
